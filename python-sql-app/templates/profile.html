{% extends "base.html" %}

{% block content %}
<section>
    <h1>Profil</h1>

    {% if username %}

        <p>
            Hier kannst du deine Abos, Hunde und Bestellungen verwalten.
        </p>

        <p>
            <a class="btn-primary" href="{{ url_for('logout') }}">Abmelden</a>
        </p>

        <div class="product-grid" style="margin-top:1.5rem;">

            <div class="product-card">
                <h2>Abos verwalten</h2>
                <p>Aktive Abos ansehen, pausieren oder kündigen.</p>
                <a class="btn-primary" href="{{ url_for('manage_subscriptions') }}">
                    Zu meinen Abos
                </a>
            </div>

            <div class="product-card">
                <h2>Meine Hunde</h2>
                <p>Alle angelegten Hunde ansehen und verwalten.</p>
                <a class="btn-primary" href="{{ url_for('mydogs') }}">
                    Hunde anzeigen
                </a>
            </div>

            <div class="product-card">
                <h2>Bestellungen verfolgen</h2>
                <p>Status aktueller Bestellungen prüfen.</p>
                <a class="btn-primary" href="{{ url_for('track_orders') }}">
                    Bestellungen verfolgen
                </a>
            </div>

            <div class="product-card">
                <h2>Bestellhistorie</h2>
                <p>Vergangene Bestellungen einsehen.</p>
                <a class="btn-primary" href="{{ url_for('order_history') }}">
                    Historie ansehen
                </a>
            </div>

        </div>

    {% else %}

        <p>
            Melde dich an oder registriere einen neuen Benutzer, um Hunde anzulegen
            und Abo-Modelle auf dich abzustimmen.
        </p>

        {% if message %}
            <p style="color: darkred; margin-top: 1rem;">{{ message }}</p>
        {% endif %}

        <div class="form-row-inline" style="margin-top: 1.5rem;">

            <div class="product-card" style="flex:1;">
                <h2>Anmelden</h2>

                <form method="post">
                    <input type="hidden" name="action" value="login">

                    <div class="form-row">
                        <label for="login-username">Benutzername</label>
                        <input type="text" id="login-username" name="username" required>
                    </div>

                    <div class="form-row">
                        <label for="login-password">Passwort</label>
                        <input type="password" id="login-password" name="password" required>
                    </div>

                    <button type="submit" class="btn-primary">Anmelden</button>
                </form>
            </div>

            <div class="product-card" style="flex:1;">
                <h2>Registrieren</h2>

                <form method="post">
                    <input type="hidden" name="action" value="register">

                    <div class="form-row">
                        <label for="reg-username">Benutzername</label>
                        <input type="text" id="reg-username" name="username" required>
                    </div>

                    <div class="form-row">
                        <label for="reg-password">Passwort</label>
                        <input type="password" id="reg-password" name="password" required>
                    </div>

                    <button type="submit" class="btn-primary">Registrieren</button>
                </form>
            </div>

        </div>

    {% endif %}
</section>
{% endblock %}
