{% extends "base.html" %}

{% block content %}
<h1>Abos verwalten</h1>

{% for sub in subscriptions %}
  <div class="abo-card">
    <h3>{{ sub.plan_title }} – {{ sub.dog_name }}</h3>
    <p>Lieferintervall: alle {{ sub.interval_days }} Tage</p>

    {% if sub.is_paused %}
        <p style="color:red;">
            Pausiert bis {{ sub.pause_until }}
        </p>
    {% else %}
        <p style="color:green;">Aktiv</p>
    {% endif %}

  <form method="post" 
      action="{{ url_for('pause_subscription', sub_id=sub.id) }}" 
      style="margin-top:0.6rem;">
  
  <label 
  for="pause_days_{{ sub.id }}"><strong>Pause:</strong>
  </label>

  <select 
      name="pause_days" 
      id="pause_days_{{ sub.id }}">
      
    <option value="7">1 Woche</option>
    <option value="14" selected>2 Wochen</option>
    <option value="28">4 Wochen</option>
  </select>

  <button type="submit" class="btn-secondary">Pausieren</button>

  {% if sub.is_paused %}
    <a class="btn-secondary" href="{{ url_for('resume_subscription', sub_id=sub.id) }}">Fortsetzen</a>
  {% endif %}
</form>

<form method="post"
        action="{{ url_for('cancel_subscription', sub_id=sub.id) }}"
        onsubmit="return confirm('Abo wirklich kündigen?');">
    <button type="submit" class="btn-primary">Abo kündigen</button>
  </form>

  </div>
{% endfor %}

{% endblock %}
